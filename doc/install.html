<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>install - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script src="./js/jquery.js"></script>
<script src="./js/darkfish.js"></script>

<link href="./css/fonts.css" rel="stylesheet">
<link href="./css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="./index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="./table_of_contents.html#pages">Pages</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="./Gemfile.html">Gemfile</a>
  
    <li><a href="./Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="./README.html">README</a>
  
    <li><a href="./Rakefile.html">Rakefile</a>
  
    <li><a href="./app/flow_thoughts_txt.html">flow_thoughts</a>
  
    <li><a href="./app/views/cost/_query_results_header_html_haml.html">_query_results_header.html.haml</a>
  
    <li><a href="./app/views/cost/query_html_haml.html">query.html.haml</a>
  
    <li><a href="./app/views/resource/_employee_details_html_haml.html">_employee_details.html.haml</a>
  
    <li><a href="./app/views/resource/_not_key_html_haml.html">_not_key.html.haml</a>
  
    <li><a href="./app/views/resource/_overbooked_html_haml.html">_overbooked.html.haml</a>
  
    <li><a href="./app/views/resource/_pill_navigation_html_haml.html">_pill_navigation.html.haml</a>
  
    <li><a href="./app/views/resource/_team_names_html_haml.html">_team_names.html.haml</a>
  
    <li><a href="./app/views/resource/actual_html_haml.html">actual.html.haml</a>
  
    <li><a href="./app/views/resource/availability_html_haml.html">availability.html.haml</a>
  
    <li><a href="./app/views/resource/employee_view_html_haml.html">employee_view.html.haml</a>
  
    <li><a href="./app/views/resource/key_project_summary_html_haml.html">key_project_summary.html.haml</a>
  
    <li><a href="./app/views/resource/rule_check_html_haml.html">rule_check.html.haml</a>
  
    <li><a href="./app/views/resource/variance_html_haml.html">variance.html.haml</a>
  
    <li><a href="./app/views/users/INDEXH~1_BAK.html">INDEXH~1.BAK</a>
  
    <li><a href="./config_ru.html">config.ru</a>
  
    <li><a href="./importlogcsv_txt.html">importlogcsv</a>
  
    <li><a href="./install.html">install</a>
  
    <li><a href="./log/development_log.html">development.log</a>
  
    <li><a href="./public/404_html.html">404.html</a>
  
    <li><a href="./public/422_html.html">422.html</a>
  
    <li><a href="./public/500_html.html">500.html</a>
  
    <li><a href="./public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="./public/fonts/glyphicons-halflings-regular_svg.html">glyphicons-halflings-regular.svg</a>
  
    <li><a href="./public/index_html.html">index.html</a>
  
    <li><a href="./public/javascripts/application_js.html">application.js</a>
  
    <li><a href="./public/javascripts/bootstrap_js.html">bootstrap.js</a>
  
    <li><a href="./public/javascripts/bootstrap_min_js.html">bootstrap.min.js</a>
  
    <li><a href="./public/javascripts/controls_js.html">controls.js</a>
  
    <li><a href="./public/javascripts/dragdrop_js.html">dragdrop.js</a>
  
    <li><a href="./public/javascripts/effects_js.html">effects.js</a>
  
    <li><a href="./public/javascripts/prototype_js.html">prototype.js</a>
  
    <li><a href="./public/javascripts/rails_js.html">rails.js</a>
  
    <li><a href="./public/robots_txt.html">robots</a>
  
    <li><a href="./public/stylesheets/application_css.html">application.css</a>
  
    <li><a href="./public/stylesheets/bootstrap-responsive_css.html">bootstrap-responsive.css</a>
  
    <li><a href="./public/stylesheets/bootstrap-responsive_min_css.html">bootstrap-responsive.min.css</a>
  
    <li><a href="./public/stylesheets/bootstrap_css.html">bootstrap.css</a>
  
    <li><a href="./public/stylesheets/bootstrap_min_css.html">bootstrap.min.css</a>
  
    <li><a href="./public/stylesheets/custom2_css.html">custom2.css</a>
  
    <li><a href="./public/stylesheets/le-frog/jquery-ui-1_8_16_custom_css.html">jquery-ui-1.8.16.custom.css</a>
  
    <li><a href="./public/stylesheets/menu_css.html">menu.css</a>
  
    <li><a href="./public/stylesheets/reset_css.html">reset.css</a>
  
    <li><a href="./public/stylesheets/scaffold_css.html">scaffold.css</a>
  
    <li><a href="./public/stylesheets/tms_css.html">tms.css</a>
  
    <li><a href="./public/stylesheets/ui-darkness/jquery-ui-1_8_16_custom_css.html">jquery-ui-1.8.16.custom.css</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page install">

<p>#!/bin/sh</p>

<p>usage() {</p>

<pre>cat &lt;&lt;-USAGE</pre>

<p>Usage: ${0##*/} [&lt;option&gt;…] [&lt;path&gt;] Install exercism client to
&lt;path&gt;. Default:</p>

<pre>* determined interactively if possible
* /usr/local/bin if run as root
* /usr/local/bin if it is writable
* $HOME/bin otherwise</pre>

<p>Options:</p>

<pre>-v &lt;version&gt;           Install client version &lt;version&gt;.      Default: $DEFAULT_VERSION
-o &lt;operating system&gt;  Install client for &lt;operating system&gt;. Default: $DEFAULT_OS
-a &lt;architecture&gt;      Install client for &lt;architecture&gt;.     Default: $DEFAULT_ARCH</pre>

<p>USAGE }</p>

<p>warn() {</p>

<pre>echo &quot;${0##*/}: $*&quot; &gt;&amp;2</pre>

<p>}</p>

<p>fail() {</p>

<pre class="ruby"><span class="ruby-identifier">warn</span> <span class="ruby-string">&quot;$*&quot;</span>
<span class="ruby-identifier">exit</span> <span class="ruby-value">1</span>
</pre>

<p>}</p>

<p>setup_downloader() {</p>

<pre>if command -v curl &gt;/dev/null; then
  DOWNLOADER=curl
elif command -v wget &gt;/dev/null; then
  DOWNLOADER=wget
else
  fail &quot;missing dependencies, please install one of: curl, wget&quot;
fi</pre>

<p>}</p>

<p>setup_defaults() {</p>

<pre>DEFAULT_DIR=&quot;$(default_dir)&quot;
DEFAULT_OS=&quot;$(default_os)&quot;
DEFAULT_ARCH=&quot;$(default_arch)&quot;
DEFAULT_VERSION=&quot;$(latest_version)&quot; || exit $?</pre>

<p>}</p>

<p>default_dir() {</p>

<pre>local DIR=/usr/local/bin
if [ &quot;$(id -u)&quot; -eq 0 ]; then
  echo &quot;$DIR&quot;
elif [ -d &quot;$DIR&quot; -a -w &quot;$DIR&quot; ]; then
  echo &quot;$DIR&quot;
else
  echo &quot;$HOME/bin&quot;
fi</pre>

<p>}</p>

<p>default_os() {</p>

<pre>case &quot;$(uname -s)&quot; in
  Darwin) echo &quot;mac&quot;;;
  *)      echo &quot;linux&quot;;;
esac</pre>

<p>}</p>

<p>default_arch() {</p>

<pre class="ruby"><span class="ruby-identifier">echo</span> <span class="ruby-string">&quot;$(getconf LONG_BIT)bit&quot;</span>
</pre>

<p>}</p>

<p>latest_version() {</p>

<pre>follow https://github.com/exercism/cli/releases/latest | filter_version_tag ||
fail &#39;Failed to get latest version. Check your internet connection.&#39;</pre>

<p>}</p>

<p>follow() {</p>

<pre>case &quot;$DOWNLOADER&quot; in
  curl) curl --head --silent &quot;$@&quot;;;
  wget) wget --server-response --quiet --output-document=/dev/null &quot;$@&quot; 2&gt;&amp;1;;
esac | tr -d &#39;\r&#39;</pre>

<p>}</p>

<p>filter_version_tag() {</p>

<pre>awk -v FS=/ &#39;/Location:/{print $NF}&#39;</pre>

<p>}</p>

<p>parse_options() {</p>

<pre>while getopts o:a:v:h OPTNAME; do
  case $OPTNAME in
    o) OS=$OPTARG;;
    a) ARCH=$OPTARG;;
    v) VERSION=$OPTARG;;
    h) usage; exit;;
    *) usage &gt;&amp;2; exit 64;;
  esac
done
shift $(expr $OPTIND - 1)
case $# in
  0) ;;
  1) DIR=$1;;
  *) usage &gt;&amp;2; exit 64;;
esac</pre>

<p>}</p>

<p>use_defaults() {</p>

<pre>: ${DIR:=&quot;$(read_directory)&quot;}
: ${DIR:=$DEFAULT_DIR}
: ${OS:=$DEFAULT_OS}
: ${ARCH:=$DEFAULT_ARCH}
: ${VERSION:=$DEFAULT_VERSION}</pre>

<p>}</p>

<p>read_directory() {</p>

<pre>if [ -t 0 ]; then
  read -p &quot;install client into: [$DEFAULT_DIR] &quot; REPLY
  if [ -n &quot;$REPLY&quot; ]; then
    echo &quot;$REPLY&quot;
  else
    echo &quot;$DEFAULT_DIR&quot;
  fi
fi</pre>

<p>}</p>

<p>check_directory() {</p>

<pre class="ruby"><span class="ruby-identifier">check_directory_exists</span>
<span class="ruby-identifier">check_directory_writable</span>
<span class="ruby-identifier">check_directory_in_path</span>
</pre>

<p>}</p>

<p>check_directory_exists() {</p>

<pre>test -d &quot;$DIR&quot; ||
mkdir -p &quot;$DIR&quot; ||
fail &quot;unable to create installation directory $DIR&quot;</pre>

<p>}</p>

<p>check_directory_writable() {</p>

<pre>test -w &quot;$DIR&quot; ||
fail &quot;unable to write installation directory $DIR&quot;</pre>

<p>}</p>

<p>check_directory_in_path() {</p>

<pre>echo &quot;$PATH&quot; | tr : &quot;\n&quot; | grep -q &quot;^$DIR$&quot; ||
warn &quot;installation directory $DIR not in PATH&quot;</pre>

<p>}</p>

<p>install() {</p>

<pre>EXERCISM_FILES=&quot;https://github.com/exercism/cli/releases/download/$VERSION/exercism-$OS-$ARCH.tgz&quot;
echo &quot;\nDownloading $EXERCISM_FILES...\n&quot;
download $EXERCISM_FILES | extract &quot;$DIR&quot;
[ $? -eq 0 ] &amp;&amp; echo &quot;Installed exercism to $DIR&quot;</pre>

<p>}</p>

<p>download() {</p>

<pre>case &quot;$DOWNLOADER&quot; in
  curl) curl -s --location &quot;$@&quot;;;
  wget) wget --output-document=- &quot;$@&quot;;;
esac ||
fail &quot;failed to download $*&quot;</pre>

<p>}</p>

<p>extract() {</p>

<pre>tar xz -C &quot;$1&quot; exercism ||
fail &quot;failed to extract exercism&quot;</pre>

<p>}</p>

<p>setup_downloader setup_defaults parse_options “$@” use_defaults
check_directory install</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

